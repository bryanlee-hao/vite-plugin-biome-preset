{"version":3,"file":"vite-plugin-biome.js","sources":["../src/vite-plugin-biome.ts"],"sourcesContent":["import type { ResolvedConfig, ViteDevServer } from 'vite'\nimport { BiomeRunner, type BiomeRunnerOptions } from './biome-runner'\n\ninterface ViteBiomePluginOptions extends BiomeRunnerOptions {\n  // ÂèØ‰ª•Ê∑ªÂä† Vite Êèí‰ª∂ÁâπÊúâÁöÑÈÄâÈ°π\n}\n\n// Biome Vite Êèí‰ª∂\nconst viteBiomePlugin = (options: ViteBiomePluginOptions = {}) => {\n  let isWatchMode = false\n  const biomeRunner = new BiomeRunner(options)\n\n  return {\n    name: 'biome-plugin',\n\n    configResolved(config: ResolvedConfig) {\n      // Ê£ÄÊü•ÊòØÂê¶Âú® watch Ê®°Âºè\n      isWatchMode = config.command === 'serve' || process.argv.includes('--watch')\n      console.log(`üîß Biome Êèí‰ª∂Â∑≤Âä†ËΩΩ - Watch Ê®°Âºè: ${isWatchMode ? 'ÂºÄÂêØ' : 'ÂÖ≥Èó≠'}`)\n    },\n\n    async buildStart() {\n      if (options.formatOnSave) {\n        await biomeRunner.runFormat()\n      } else {\n        await biomeRunner.runLint()\n      }\n    },\n\n    configureServer(server: ViteDevServer) {\n      if (isWatchMode) {\n        if (options.formatOnSave) {\n          console.log('ÔøΩÔøΩ Biome formatOnSave Â∑≤ÂêØÁî®')\n        } else {\n          console.log('üëÄ Biome lintOnSave Â∑≤ÂêØÁî®')\n        }\n\n        // ÁõëÂê¨Êñá‰ª∂ÂèòÂåñ\n        server.watcher.on('change', async (file: string) => {\n          if (biomeRunner.isBiomeFile(file)) {\n            console.log(`üìù Ê£ÄÊµãÂà∞Êñá‰ª∂ÂèòÂåñ: ${file}`)\n            await biomeRunner.runOperation([file])\n          }\n        })\n\n        // ÁõëÂê¨Êñá‰ª∂Ê∑ªÂä†\n        server.watcher.on('add', async (file: string) => {\n          if (biomeRunner.isBiomeFile(file)) {\n            console.log(`üìÑ Ê£ÄÊµãÂà∞Êñ∞Êñá‰ª∂: ${file}`)\n            await biomeRunner.runOperation([file])\n          }\n        })\n      }\n    },\n\n    // ÊûÑÂª∫ÁªìÊùüÊó∂ÊâßË°å\n    async closeBundle() {\n    },\n  }\n}\n\nexport default viteBiomePlugin\n"],"names":[],"mappings":";AAQA,MAAM,kBAAkB,CAAC,UAAkC,OAAO;AAChE,MAAI,cAAc;AAClB,QAAM,cAAc,IAAI,YAAY,OAAO;AAE3C,SAAO;AAAA,IACL,MAAM;AAAA,IAEN,eAAe,QAAwB;AAErC,oBAAc,OAAO,YAAY,WAAW,QAAQ,KAAK,SAAS,SAAS;AAC3E,cAAQ,IAAI,8BAA8B,cAAc,OAAO,IAAI,EAAE;AAAA,IAAA;AAAA,IAGvE,MAAM,aAAa;AACjB,UAAI,QAAQ,cAAc;AACxB,cAAM,YAAY,UAAA;AAAA,MAAU,OACvB;AACL,cAAM,YAAY,QAAA;AAAA,MAAQ;AAAA,IAC5B;AAAA,IAGF,gBAAgB,QAAuB;AACrC,UAAI,aAAa;AACf,YAAI,QAAQ,cAAc;AACxB,kBAAQ,IAAI,2BAA2B;AAAA,QAAA,OAClC;AACL,kBAAQ,IAAI,yBAAyB;AAAA,QAAA;AAIvC,eAAO,QAAQ,GAAG,UAAU,OAAO,SAAiB;AAClD,cAAI,YAAY,YAAY,IAAI,GAAG;AACjC,oBAAQ,IAAI,eAAe,IAAI,EAAE;AACjC,kBAAM,YAAY,aAAa,CAAC,IAAI,CAAC;AAAA,UAAA;AAAA,QACvC,CACD;AAGD,eAAO,QAAQ,GAAG,OAAO,OAAO,SAAiB;AAC/C,cAAI,YAAY,YAAY,IAAI,GAAG;AACjC,oBAAQ,IAAI,cAAc,IAAI,EAAE;AAChC,kBAAM,YAAY,aAAa,CAAC,IAAI,CAAC;AAAA,UAAA;AAAA,QACvC,CACD;AAAA,MAAA;AAAA,IACH;AAAA;AAAA,IAIF,MAAM,cAAc;AAAA,IAAA;AAAA,EACpB;AAEJ;"}